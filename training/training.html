<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Training</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../img/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="training.css">
<meta name="twitter:title" content="Training">
<meta name="twitter:site" content="@ComoConsortium">
<meta name="twitter:card" content="summary">
</head>

<body class="floating nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/como_inter_dark.png" alt="CoMo International" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-research" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Research</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-research">    
        <li>
    <a class="dropdown-item" href="../publications.html">
 <span class="dropdown-text">Publications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../models.html">
 <span class="dropdown-text">Models</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="../training/training.html" aria-current="page"> 
<span class="menu-text">Training</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../news.html"> 
<span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../contact.html">
 <span class="dropdown-text">Contact</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://twitter.com/ComoConsortium"><i class="bi bi-twitter-x" role="img">
</i> 
 <span class="dropdown-text"></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/como-international"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text"></span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">




<div id="training-banner" class="column-screen page-columns page-full">
<div class="grid column-page">
<div class="training-headline g-col-lg-5 g-col-12 g-col-md-12">
<div id="training-logo-top">
<!-- ![](img/training/biology_keyline.svg) -->
</div>
<p>Strategic Modelling for Public Health Policy Training Programme</p>
</div>
<div class="training_right_background g-col-lg-7 d-none d-lg-block d-xl-block">

</div>
</div>
</div>
<div class="column-screen page-columns page-full">
<div class="column-page">
<section id="why-como" class="level2">
<h2 class="anchored" data-anchor-id="why-como">Why CoMo?</h2>
<div class="grid">
<div class="g-col-lg-6 g-col-12 g-col-md-12">
<div class="text_justified">
<p>The COVID-19 pandemic has highlighted the importance of pandemic preparedness and demonstrated that academia can deliver highly transformative interventions. The International Modelling Consortium (CoMo) was created in March 2020 by researchers at the University of Oxford, together with academic colleagues at Cornell University, and partners with infectious disease modellers and other public health experts from more than 40 countries across Africa, Asia and South and North America. Using a participatory approach, CoMo provides decision-making support to policymakers, using evidence from epidemiological and economic models adapted to each country’s context. With COVID-19 now endemic, CoMo continues to work with modellers and public health researchers on the challenges of a range of infectious diseases. To prepare for future pandemic challenges, CoMo members have highlighted the need for accessible training in health policy-facing modelling.</p>
</div>
</div>
<div class="g-col-lg-6 g-col-12 g-col-md-12">
<div class="text_justified">
<p>We have developed a programme of training on policy-facing public health modelling for a global audience. The overarching purpose is to widen global access and build modelling capacity in in-country settings. The benefits of this include improving pandemic preparedness, particularly in low- and middle-income countries. During the COVID-19 pandemic, modelling expertise was concentrated in high-income countries and CoMo was the only international community that supported LMIC leadership in the field. Also, of key importance is that this programme provides equitable access which aligns with a larger inter-divisional initiative, Global Equitable Oxford (with support from the Vice Chancellor’s Office), which aims to improve inclusivity and access to Oxford University expertise and connect with world-class researchers across the globe.</p>
</div>
</div>
</div>
<!-- ::: {.g-col-lg-12 .g-col-12 .g-col-md-12} -->
</section>
<section id="who-is-the-programme-designed-for" class="level2">
<h2 class="anchored" data-anchor-id="who-is-the-programme-designed-for">Who is the programme designed for?</h2>
<div class="text_justified">
<p>Our course modules for 2024 are aimed at entry level modellers, those who are exploring a career in modelling, or those in related professions who wish to know more about the discipline.</p>
<p>The courses are designed for those working in a range of sectors. For example, the public sector - medical professionals, data scientists, epidemiologists, health economists, medical statisticians; NGO staff; academic researchers; and those working in the private sector, the pharmaceutical and consulting industry.</p>
<p>Future modules will offer intermediate and advanced skills for mid-career modellers or related professionals who wish to build on foundational training and/or extend their technical repertoire. We can also provide bespoke versions of this course for organisations. Please contact us <email address=""> if you would like to discuss this opportunity further.</email></p>
</div>
</section>
</div>
</div>
<!-- section 2: next course runs -->
<div id="training-banner" class="column-screen page-columns page-full">
<section id="next-course-runs" class="level2 column-page">
<h2 class="anchored" data-anchor-id="next-course-runs">Next Course Runs</h2>
<section id="dates" class="level3">
<h3 class="anchored" data-anchor-id="dates">Dates</h3>
<table class="table">
<colgroup>
<col style="width: 56%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Courses</th>
<th style="text-align: right;">Dates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Introduction to R for Modellers</td>
<td style="text-align: right;">April – May 2024</td>
</tr>
<tr class="even">
<td style="text-align: left;">Infectious Disease Modelling in Context: Introduction</td>
<td style="text-align: right;">June – July 2024</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Infectious Disease Modelling in Context: Intermediate</td>
<td style="text-align: right;">August – September 2024</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Exact dates, day and time of the week need to be included once firmed up</p>
</div>
</div>
</section>
</section>
</div>
<!-- section 3: modules and leads -->
<div class="column-screen page-columns page-full">
<div class="column-page">
<section id="courses" class="level2">
<h2 class="anchored" data-anchor-id="courses">Courses</h2>
<section id="course-r" class="level3">
<h3 class="anchored" data-anchor-id="course-r">Introduction to R for modellers</h3>
<p><strong>Module lead: Dr Bo Gao</strong> <a href="https://www.tropicalmedicine.ox.ac.uk/team/bo-gao">Bio</a></p>
<details>
<summary>
Details
</summary>
<div class="text_justified">
<p>This module gives introduction to the basic elements of the R programming language with emphasis on its application in the context of infectious disease modelling. The materials covered in this module underpins the technical aspect of the training programme. R is a popular programming language in the research community especially that of disease modelling. It is open source and freely available cross platforms. On top of the rich statistical computing package library it already has, R also enjoys the support of vibrant open-source community of researchers and developers who are constantly contributing to enrich the ecosystem around R. Packages such as ggplot and shiny give R users a unique advantage when it comes to communicating research outputs with a wider audience by making it incredibly easy to make graphical representations of data and publishing them online. During this module, we will take the students through key aspects of the R programming language starting from basic notations of the language to the introduction of popular data manipulation and visualisation packages. The module concludes with advanced topics such as code profiling and optimisation. We will give examples of mathematical models during the module to give the students a hands-on experience in model building.</p>
</div>
</details>
</section>
<section id="infectious-disease-modelling-in-context-introduction" class="level3">
<h3 class="anchored" data-anchor-id="infectious-disease-modelling-in-context-introduction">Infectious Disease Modelling in Context: Introduction</h3>
<p><strong>Module lead: Professor Ricardo Aguas</strong> <a href="https://www.tropicalmedicine.ox.ac.uk/team/ricardo-aguas">Bio</a></p>
<details>
<summary>
Details
</summary>
<div class="text_justified">
<p>This module provides a practical introduction to the mathematical modelling of infectious diseases. Mathematical modelling is being used with increasing frequency and scope to address questions about infectious diseases both in terms of basic science and in terms of national and international policymaking. Mathematical modellers arrive at the discipline from many backgrounds ranging from epidemiology to economics. Mathematical modelling is an interdisciplinary activity which brings together elements from mathematics, computer science, economics, demographics, virology, and immunology.</p>
<p>In this module, the students will be supported to develop a set of basic mathematical modelling skills though a mix of practical sessions interspersed with short theory sessions. They will be given a thorough introduction to the core concepts and techniques that will permeate sessions throughout the week and some elective modules. This foundation will be solidified through key working examples and put into practice in R. Throughout the week we will guide the students through the process of building a model suited to address a research/policy question, developing and implementing the model in mathematical and code forms, and interpret the short- and long-term dynamics produced. Starting from simple compartmental models, students will be exposed to a repository of different model typologies that could be used as a template for any future modelling exercise.</p>
</div>
</details>
</section>
<section id="infectious-disease-modelling-in-context-intermediate" class="level3">
<h3 class="anchored" data-anchor-id="infectious-disease-modelling-in-context-intermediate">Infectious Disease Modelling in Context: Intermediate</h3>
<p><strong>Module Lead: Professor Lisa White</strong> <a href="https://www.medawar.ox.ac.uk/team/lisa-white">Bio</a></p>
<details>
<summary>
Details
</summary>
<div class="text_justified">
<p>This module will provide students with the opportunity to create and develop their own models while being introduced to concepts and approaches specific to policy-facing modelling. In the academic sector, models are developed to address a scientific question and are communicated to an academic audience. However, to bridge the gap between academic work and health policy further knowledge, communication skills and styles of working are required. In this module students will engage in a series of group projects which will guide them through the process of inception, development, and application of their own models. In parallel, the students will receive lectures and engage in discussions to uncover the challenges of working in partnership with policymakers. Students will explore the broader context in which modelling sits within the public health decision-making ecosystem and gain insights into how to bring their research to impact.</p>
</div>
</details>
</section>
</section>
<section id="who-is-involved" class="level2">
<h2 class="anchored" data-anchor-id="who-is-involved">Who is involved?</h2>
<p>Our modules will be taught by the following experts:</p>
<ul>
<li><p>Professor Ricardo Aguas <a href="https://www.tropicalmedicine.ox.ac.uk/team/ricardo-aguas">Bio</a></p></li>
<li><p>Dr Bo Gao <a href="https://www.tropicalmedicine.ox.ac.uk/team/bo-gao">Bio</a></p></li>
<li><p>Professor Lisa White <a href="https://www.medawar.ox.ac.uk/team/lisa-white">Bio</a></p></li>
</ul>
</section>
</div>
</div>
<!-- section 4: details -->
<div id="training-banner" class="column-screen page-columns page-full">
<section id="details" class="level2 column-page">
<h2 class="anchored" data-anchor-id="details">Details</h2>
<div class="grid">
<div class="g-col-lg-6 g-col-12 g-col-md-12">
<section id="duration" class="level3">
<h3 class="anchored" data-anchor-id="duration">Duration</h3>
<p>Each module will consist of 8 weeks of teaching. There will be 2 x 2-hour sessions per week. Each 2-hour session will include a 15-minute break.</p>
</section>
<section id="price-per-module" class="level3">
<h3 class="anchored" data-anchor-id="price-per-module">Price (per module)</h3>
<ul>
<li>£3,200 Private Sector</li>
<li>£2,500 Public Sector</li>
<li>£500 for those based in lower-income countries</li>
</ul>
<p>Fee waivers for those who meet pre-determined criteria. There will be an application process for fee waivers on the programme for participants who do not have the available funds.</p>
<p>Please read our pricing policy <a href="">link (TBA)</a></p>
</section>
<section id="location" class="level3">
<h3 class="anchored" data-anchor-id="location">Location</h3>
<p>Online</p>
</section>
<section id="apply" class="level3">
<h3 class="anchored" data-anchor-id="apply">Apply</h3>
<p>Please apply using our online form <a href="">link from University Online Stores (TBA)</a></p>
<p>For further information contact <a href="">email (TBA)</a>.</p>
<p>We also provide bespoke versions of this course for organisations. Please contact us if you would like to discuss this opportunity further.</p>
</section>
</div>
<section id="modules" class="level3 g-col-lg-6 g-col-12 g-col-md-12">
<h3 class="anchored" data-anchor-id="modules">Modules</h3>
<ul>
<li>Introduction to R for modellers</li>
<li>Modelling Infectious Diseases in Context: Introduction</li>
<li>Modelling Infectious Diseases in Context: Intermediate</li>
</ul>
</section>
</div>
</section>
</div>
<!-- section 5: logo -->
<div id="training-banner" class="column-screen page-columns page-full">
<div class="column-page">
<div id="training-logo-end">
<!-- ![](img/training/biology_keyline.svg) -->
</div>
</div>
</div>
<style>


</style>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Made with <a href="https://quarto.org/"><img src="https://quarto.org/quarto.png" class="img-fluid" alt="Quarto" width="65"></a></p>
</div>
    <div class="nav-footer-right">
<p>© 2020-2024 · CoMo International</p>
</div>
  </div>
</footer>




</body></html>